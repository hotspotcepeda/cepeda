[{"content":"Cepeda la Mora\n","description":"paisaje gallery","id":2,"section":"gallery","tags":null,"title":"Paisaje","uri":"https://hotspotcepeda.github.io/es/gallery/paisaje/"},{"content":"BBDD\n1 2 3 4 5 6  docker run -d \\ -v `pwd`/mysql:/var/lib/mysql \\ -v `pwd`/50-server.cnf:/etc/mysql/mariadb.conf.d/50-server.cnf:ro \\ -e MYSQL_ROOT_PASSWORD=mysqlPASWORD \\ –name librenms-db \\ mariadb:latest   Lanza librenms, se asocia a la BBDD\n1 2 3 4 5 6 7 8 9 10 11 12 13  docker run -d \\ -v `pwd`/data:/data \\ -p 888:80 \\ -e TZ=»Europe/Madrid» \\ –link 0bd3a3993581(id container BBDD):mysql \\ -e POLLER=24 \\ -e DB_TYPE=mysql \\ -e DB_HOST=mysql \\ -e DB_NAME=librenms \\ -e DB_USER=root \\ -e DB_PASS=mysqlPASWORD \\ –name librenms \\ seti/librenms   Al navegador http://ipserver:888/install.php\n","description":"Instalar LibreNMS en un contenedor de Docker","id":3,"section":"posts","tags":["docker","librenms","debian"],"title":"Librenms Docker install","uri":"https://hotspotcepeda.github.io/es/posts/librenms_docker_install/"},{"content":"El proposito de este sitio es:\n Compartir la experiencia del proyecto de red comunitaria en Cepeda. Archivar y mantener disponible la documentación técnica. Dar las graciaspor la ayuda recibida e intentar ayudar al que lo necesite para replicar este proyecto de red comunitaria en otros lugares.  Si desea colaborar en el proyecto de Cepeda, en este sitio para aportar contenido, como redactor, traductor o simplemente para expresar su opinión, le invito a contactar mediante el canal de matrix creado para esto y contribuir en github.\nPienso que las telecomunicaciones en nuestra sociedad actual tienen que estar al alcance de todas las personas y por ello las considero un derecho fundamental, como lo son la educación o la sanidad pública. Quiero agradecer a todas esas personas que comparten su experiencia, conocimientos e información para ponerlas al servicio del desarrollo de la humanidad de manera desinteresada.\nTambién quiero añadir que no soy programador profesional y que no hago esto con fines lucrativos, solo hago esto porque me gustan las telecomunicaciones y la tecnología. Si de alguna manera me equivoco acepte mis más sinceras disculpas y no dude en corregirme.\r ","description":"descripcion del sitio","id":4,"section":"","tags":null,"title":"Sitio","uri":"https://hotspotcepeda.github.io/es/sitio/"},{"content":"Fotos de la Red\n","description":"Galeria fotos de Red","id":5,"section":"gallery","tags":null,"title":"Red","uri":"https://hotspotcepeda.github.io/es/gallery/red/"},{"content":"Hugo ships with several Built-in Shortcodes for rich content, along with a Privacy Config and a set of Simple Shortcodes that enable static and no-JS versions of various social media embeds.\nYouTube Privacy Enhanced Shortcode   Twitter Simple Shortcode .twitter-tweet { font: 14px/1.45 -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif; border-left: 4px solid #2b7bb9; padding-left: 1.5em; color: #555; } .twitter-tweet a { color: #2b7bb9; text-decoration: none; } blockquote.twitter-tweet a:hover, blockquote.twitter-tweet a:focus { text-decoration: underline; }  “In addition to being more logical, asymmetry has the advantage that its complete appearance is far more optically effective than symmetry.”\n— Jan Tschichold pic.twitter.com/gcv7SrhvJb\n\u0026mdash; Graphic Design History (@DesignReviewed) January 17, 2019 Vimeo Simple Shortcode  .__h_video { position: relative; padding-bottom: 56.23%; height: 0; overflow: hidden; width: 100%; background: #000; } .__h_video img { width: 100%; height: auto; color: #000; } .__h_video .play { height: 72px; width: 72px; left: 50%; top: 50%; margin-left: -36px; margin-top: -36px; position: absolute; cursor: pointer; }  ","description":"La Propuesta que se hizo al Ayto","id":13,"section":"posts","tags":["guifi.net","qMp"],"title":"La propuesta","uri":"https://hotspotcepeda.github.io/es/posts/la_propuesta/"},{"content":"https://ralph-ng.readthedocs.io/\nRalph es un sistema de gestión de activos, DCIM y CMDB simple pero potente para centros de datos y back office.\nCaracterísticas:\n realizar un seguimiento de las compras de activos y su ciclo de vida sistema de flujo flexible para el ciclo de vida de los activos centro de datos y soporte de back office Visualización dc incorporada  Ralph en Docker 1 2 3  docker run -i -t --name=\u0026#34;mysql_ralph\u0026#34; -v /var/lib/mysql -v /home/ralph/.ralph busybox /bin/sh -c \u0026#34;chown root /home/ralph; chown root /home/ralph/.ralph\u0026#34; docker run -P -t -i --volumes-from mysql_ralph allegrogroup/ralph:latest /bin/bash /home/ralph/init.sh docker run -P -p 8000:8000 -t -i --name ralph --mac-address=02:42:ac:11:ff:ff --volumes-from mysql_ralph allegrogroup/ralph:latest   Compose\nhttps://ralph-ng.readthedocs.io/en/stable/\nInstall\nInstall docker and docker-compose first.\nCreate compose configuration\nCopy docker-compose.yml.tmpl outside ralph sources to docker-compose.yml and tweak it.\nBuild\nThen build ralph:\n1  docker-compose build   To initialize database run:\n1  docker-compose run --rm web /root/init.sh   Notice that this command should be executed only once, at the very beginning.\nIf you need to populate Ralph with some demonstration data run:\n1  docker-compose run --rm web ralph demodata   Run ralph at the end:\n1  docker-compose up -d   Ralph should be accessible at http://127.0.0.1 (or if you are using boot2docker at $(boot2docker ip)). Documentation is available at http://127.0.0.1/docs.\nIf you are upgrading ralph image (source code) run:\n1  docker-compose run --rm web /root/upgrade.sh   ","description":"ralph docker install","id":14,"section":"posts","tags":["ralph","docker"],"title":"ralph","uri":"https://hotspotcepeda.github.io/es/posts/ralph/"},{"content":"Y se puso en producción el hotspot, un hotspot en wifi es un dispositivo con capacidades de enrutamiento que gestiona conexiones de otros dispositivos (punto caliente) y les da salida a internet, una especie de pasarela o gateway pero en este caso con capacidades de gestión del trafico.\nLa salida a internet para toda la red comunitaria la dona el excelentísimo Ayto de Cepeda la Mora, es un router 4G de 10 Mb dedicado.\nHardware Para hacer la gestión de los dispositivos que se conectan a pie de calle se usa una ROUTERBOARD MIKROTIK RB750GL, este router está dedicado solo para esta tarea, lleva funcionando 24x7 desde el año 2014 de la era pre-covid.\nLa red de captación del hotspot va toda en 2.4 Ghz, APs en 802.11b para que se puedan conectar dispositivos antiguos.\nEl AP de la plaza Ubiquiti NanoStation 2 está en modo AP bridge, debe de tener mas de 10 años, es de cuando venían con un latiguillo de 3 metros de color azul, que tiempos aquellos.\nPara extender la red del hotspot hay en enlace en 2.4 del Ayto al Bar municipal \u0026ldquo;El Traite\u0026rdquo; con Ubiquiti NanoStation Loco M2.\nPara la captación en el Bar se usa de AP un router Comtrend AR-5387un https://openwrt.org/toh/comtrend/ar5387un liberado con OpenWRT, ni un problema, 24x7 desde 2014 más lo que llevara funcionando antes.\ngraph TD;\rROUTERBOARD_MIKROTIK_RB750GL--\u0026gt;WAN_ether1;\rROUTERBOARD_MIKROTIK_RB750GL--\u0026gt;Libre_ether2;\rROUTERBOARD_MIKROTIK_RB750GL--\u0026gt;Gestión_ether3;\rROUTERBOARD_MIKROTIK_RB750GL--\u0026gt;bridge1_ether4;\rbridge1_ether4--\u0026gt;AP_NS2_plaza_Ayto;\rROUTERBOARD_MIKROTIK_RB750GL--\u0026gt;bridge1_ether5;\rbridge1_ether5--\u0026gt;enl_NSlocoM2_a;\renl_NSlocoM2_a--\u0026gt;enl_NSlocoM2_b;\renl_NSlocoM2_b--\u0026gt;AP_OpenWRT_Bar_Municipal;\rConfiguración MikroTik 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480  [admin@hostname] \u0026gt; export # mar/14/2021 01:23:15 by RouterOS 6.43.2 # software id = LVV0-IUW2 # # model = 750GL # serial number = 888A02585888 /interface bridge add comment=LAN fast-forward=no mtu=1500 name=bridge1 protocol-mode=none /interface ethernet set [ find default-name=ether1 ] comment=\u0026#34;WAN ether1\u0026#34; name=Lan speed=100Mbps set [ find default-name=ether2 ] speed=100Mbps set [ find default-name=ether3 ] comment=GESTION speed=100Mbps set [ find default-name=ether4 ] comment=-AP-HOSTSPOT disabled=yes speed=100Mbps set [ find default-name=ether5 ] comment=-HS_NANO_ENL speed=100Mbps /interface list add name=mactel add name=mac-winbox /interface wireless security-profiles set [ find default=yes ] supplicant-identity=hostname /ip firewall layer7-protocol add name=youtube regexp=\u0026#34;(GET \\\\/videoplayback\\\\\\?|GET \\\\/crossdomain\\\\.xml)\u0026#34; add name=torrentsites regexp=\u0026#34;^.*(get|GET).+(torrent|thepiratebay|isohunt|entertane|demonoid|btjunkie|mininova|flixflux|torrentz|vertor|h33t|btscene|bitunity|bittoxic|thunderbytes|entertane|zoozle|vcdq|bitnova|bitsoup|meganova|fulldls|btbot|flixflux|\\ seedpeer|fenopy|gpirate|commonbits).*\\$\u0026#34; add name=p2p_www regexp=\u0026#34;^.*(get|GET).+(torrent|thepiratebay|isohunt|entertane|demonoid|btjunkie|mininova|flixflux|vertor|h33t|zoozle|bitnova|bitsoup|meganova|fulldls|btbot|fenopy|gpirate|commonbits).*\\$\u0026#34; add name=p2p_dns regexp=\u0026#34;^.+(torrent|thepiratebay|isohunt|entertane|demonoid|btjunkie|mininova|flixflux|vertor|h33t|zoozle|bitnova|bitsoup|meganova|fulldls|btbot|fenopy|gpirate|commonbits).*\\$\u0026#34; /ip hotspot profile add dns-name=guifi.net_Acceso_Abierto hotspot-address=192.168.100.1 login-by=http-chap,trial name=hsprof2 trial-uptime-limit=2d trial-uptime-reset=23h59m /ip hotspot add interface=bridge1 name=hotspot1 profile=hsprof2 /ip hotspot user profile set [ find default=yes ] add-mac-cookie=no keepalive-timeout=none name=usuarios on-login=\u0026#34;#Keep alive para limitar la sesion diaria a un tiempo\u0026#34; open-status-page=http-login rate-limit=\u0026#34;1M/1M 2M/2M 320k/320k 8/8 1 320/320\u0026#34; shared-users=1000 \\  transparent-proxy=yes /ip ipsec proposal set [ find default=yes ] enc-algorithms=3des /ip pool add name=hs-pool-4 ranges=192.168.100.10-192.168.100.254 add name=pool_gestion ranges=192.168.88.100-192.168.88.200 /ip dhcp-server add add-arp=yes address-pool=hs-pool-4 authoritative=after-2sec-delay disabled=no interface=bridge1 lease-time=1d name=dhcp_HS add add-arp=yes address-pool=pool_gestion disabled=no interface=ether3 name=dhcp_gestion /ip hotspot user profile add address-pool=hs-pool-4 name=sincontrol transparent-proxy=yes /queue simple add burst-limit=3M/3M burst-threshold=256k/256k burst-time=8s/8s disabled=yes max-limit=2M/2M name=queue1 packet-marks=clientes_2M target=ether4 /queue tree add disabled=yes name=cliente_2M_up packet-mark=clientes_2M parent=ether4 priority=1 add disabled=yes name=cliente_2M_down packet-mark=clientes_2M parent=ether4 priority=1 add max-limit=5M name=Download parent=bridge1 priority=1 add max-limit=300k name=Upload parent=Lan priority=1 /queue type add kind=pcq name=PCQ_download_2mb pcq-classifier=dst-address pcq-rate=2M add kind=pcq name=PCQ_upload_300k pcq-classifier=src-address pcq-rate=300k add kind=sfq name=BAJADA add kind=sfq name=SUBIDA /queue simple add comment=\u0026#34;# l\\EDmite global (compartido por todos los usuarios):\\r\\ \\n# 5M subida\\r\\ \\n# 35M bajada\\r\\ \\n# \\r\\ \\n# segmento de red de los clientes con este paquete de datos,\\r\\ \\n# puede usarse una interfaz de ser necesario:\\r\\ \\n# 10.10.12.0/24\u0026#34; limit-at=384k/5M max-limit=384k/5M name=2MB_down_384MB_up queue=PCQ_upload_300k/PCQ_download_2mb target=bridge1 total-queue=default /queue tree add disabled=yes max-limit=32k name=P2P packet-mark=p2p-qos parent=bridge1 queue=default add comment=\u0026#34;una cola para el total del tr\\E1fico de bajada, aqu\\ED se especifica\\r\\ \\n# la interfaz desde la que se reparte el tr\\E1fico a los clientes\u0026#34; disabled=yes limit-at=8M max-limit=8M name=\u0026#34;Total download\u0026#34; parent=bridge1 priority=1 queue=default add comment=\u0026#34;una cola para el total del tr\\E1fico de subida, aqu\\ED se especifica\\r\\ \\n# la interfaz desde la que se env\\EDa el tr\\E1fico al gateway \u0026#34; disabled=yes limit-at=300k max-limit=300k name=\u0026#34;Total upload\u0026#34; parent=Lan priority=1 queue=default add comment=\u0026#34;hoja (cola hija) de bajada para el tr\\E1fico web (HTTP), utiliza\\r\\ \\n# la marca establecida en la tabla mangle del firewall\u0026#34; disabled=yes limit-at=1M max-limit=6M name=HTTP_D packet-mark=priority_packet parent=\u0026#34;Total download\u0026#34; priority=3 queue=default add comment=\u0026#34;hoja de subida para el tr\\E1fico web (HTTP), utiliza la misma marca\\r\\ \\n# de la cola anterior\u0026#34; disabled=yes limit-at=100k max-limit=200k name=HTTP_U packet-mark=priority_packet parent=\u0026#34;Total upload\u0026#34; priority=3 queue=default add comment=\u0026#34;los paquetes con marca \\\u0026#34;other-internet\\\u0026#34; tienen una menor prioridad\\r\\ \\n# que los paquetes web, es necesario especificar estas colas, de lo\\r\\ \\n# contrario el tr\\E1fico no gestionado pasar\\E1 con la mayor prioridad\u0026#34; disabled=yes limit-at=500k max-limit=1M name=OTHER_D packet-mark=no_priority_packet parent=\u0026#34;Total download\u0026#34; priority=4 queue=default add comment=\u0026#34;los paquetes con marca \\\u0026#34;other-internet\\\u0026#34; tienen una menor prioridad\\r\\ \\n# que los paquetes web, es necesario especificar estas colas, de lo\\r\\ \\n# contrario el tr\\E1fico no gestionado pasar\\E1 con la mayor prioridad\u0026#34; disabled=yes limit-at=50k max-limit=100k name=OTHER_U packet-mark=no_priority_packet parent=\u0026#34;Total upload\u0026#34; priority=4 queue=default add name=PRIO1 packet-mark=\u0026#34;PRIO 1\u0026#34; parent=Download priority=1 queue=BAJADA add name=PRIO2 packet-mark=\u0026#34;PRIO 2\u0026#34; parent=Download priority=2 queue=BAJADA add name=PRIO3 packet-mark=\u0026#34;PRIO 3\u0026#34; parent=Download priority=3 queue=BAJADA add name=PRIO4 packet-mark=\u0026#34;PRIO 4\u0026#34; parent=Download priority=4 queue=BAJADA add name=PRIO5 packet-mark=\u0026#34;PRIO 5\u0026#34; parent=Download priority=5 queue=BAJADA add name=PRIO7 packet-mark=\u0026#34;PRIO 7\u0026#34; parent=Download priority=7 queue=BAJADA add name=PRIO8 packet-mark=\u0026#34;PRIO 8\u0026#34; parent=Download queue=BAJADA add name=PRIO.1 packet-mark=\u0026#34;PRIO 1\u0026#34; parent=Upload priority=1 queue=SUBIDA add name=PRIO.2 packet-mark=\u0026#34;PRIO 2\u0026#34; parent=Upload priority=2 queue=SUBIDA add name=PRIO.3 packet-mark=\u0026#34;PRIO 3\u0026#34; parent=Upload priority=3 queue=SUBIDA add name=PRIO.4 packet-mark=\u0026#34;PRIO 4\u0026#34; parent=Upload priority=4 queue=SUBIDA add name=PRIO.5 packet-mark=\u0026#34;PRIO 5\u0026#34; parent=Upload priority=5 queue=SUBIDA add name=PRIO.7 packet-mark=\u0026#34;PRIO 7\u0026#34; parent=Upload priority=7 queue=SUBIDA add name=PRIO.8 packet-mark=\u0026#34;PRIO 8\u0026#34; parent=Upload queue=SUBIDA /snmp community set [ find default=yes ] addresses=0.0.0.0/0 /system logging action set 0 memory-lines=100 set 1 disk-lines-per-file=100 set 3 remote=192.168.1.213 /interface bridge port add bridge=bridge1 hw=no interface=ether4 add bridge=bridge1 hw=no interface=ether5 /interface bridge settings set use-ip-firewall=yes /interface list member add interface=ether2 list=mactel add interface=ether3 list=mactel add interface=ether2 list=mac-winbox add interface=ether4 list=mactel add interface=ether3 list=mac-winbox add interface=ether5 list=mactel add interface=ether4 list=mac-winbox add interface=ether5 list=mac-winbox /ip address add address=10.228.150.3/28 comment=\u0026#34;GW Ayto\u0026#34; interface=Lan network=10.228.150.0 add address=192.168.100.1/24 comment=\u0026#34;GW hotspot\u0026#34; interface=bridge1 network=192.168.100.0 add address=192.168.88.1/24 interface=ether3 network=192.168.88.0 /ip dhcp-server network add address=192.168.88.0/24 comment=\u0026#34;default configuration\u0026#34; gateway=192.168.88.1 add address=192.168.100.0/24 gateway=192.168.100.1 /ip dns set allow-remote-requests=yes cache-size=10096KiB max-udp-packet-size=512 servers=10.228.150.6,8.8.4.4 /ip firewall address-list add list=Syn_Flooder add disabled=yes list=spammers add disabled=yes list=support add address=192.168.100.0/24 list=Cliente_2M add address=10.228.150.0/28 list=guifi.net /ip firewall filter add action=accept chain=input comment=\u0026#34;Accept to established connections\u0026#34; connection-state=established add action=accept chain=input comment=\u0026#34;Accept to related connections\u0026#34; connection-state=related add action=drop chain=forward comment=\u0026#34;Filtra paquetes chungos\u0026#34; connection-state=invalid add action=passthrough chain=unused-hs-chain comment=\u0026#34;place hotspot rules here ----------- place hotspot rules here ----------- place hotspot rules here ----------- place hotspot rules here ----------- place hotspot rules here ----------- place hotsp\\ ot rules here ----------- place hotspot rules here ----------- \u0026#34; add action=jump chain=output comment=\u0026#34;Jump for icmp output\u0026#34; disabled=yes jump-target=ICMP protocol=icmp add action=add-src-to-address-list address-list=Syn_Flooder address-list-timeout=30m chain=input comment=\u0026#34;Add Syn Flood IP to the list\u0026#34; connection-limit=30,32 protocol=tcp tcp-flags=syn add action=drop chain=input comment=\u0026#34;Drop to syn flood list\u0026#34; src-address-list=Syn_Flooder add action=drop chain=input comment=\u0026#34;Drop to syn flood list\u0026#34; disabled=yes src-address-list=Syn_Flooder add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;Port scanners to list \u0026#34; protocol=tcp psd=21,3s,3,1 add action=log chain=input comment=\u0026#34;Port Scanner Detect LOG\u0026#34; log-prefix=\u0026#34;PORT SCAN\u0026#34; protocol=tcp psd=21,3s,3,1 add action=log chain=input comment=\u0026#34;Port Scanner Detect LOG\u0026#34; disabled=yes log-prefix=\u0026#34;PORT SCAN\u0026#34; protocol=tcp psd=21,3s,3,1 add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;NMAP FIN Stealth scan\u0026#34; protocol=tcp tcp-flags=fin,!syn,!rst,!psh,!ack,!urg add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;SYN/FIN scan\u0026#34; protocol=tcp tcp-flags=fin,syn add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;SYN/RST scan\u0026#34; protocol=tcp tcp-flags=syn,rst add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;SYN/FIN scan\u0026#34; protocol=tcp tcp-flags=fin,syn add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;SYN/RST scan\u0026#34; protocol=tcp tcp-flags=syn,rst add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;FIN/PSH/URG scan\u0026#34; protocol=tcp tcp-flags=fin,psh,urg,!syn,!rst,!ack add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;FIN/PSH/URG scan\u0026#34; protocol=tcp tcp-flags=fin,psh,urg,!syn,!rst,!ack add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;ALL/ALL scan\u0026#34; protocol=tcp tcp-flags=fin,syn,rst,psh,ack,urg add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;NMAP NULL scan\u0026#34; protocol=tcp tcp-flags=!fin,!syn,!rst,!psh,!ack,!urg add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;NMAP FIN Stealth scan\u0026#34; protocol=tcp tcp-flags=fin,!syn,!rst,!psh,!ack,!urg add action=log chain=input comment=\u0026#34;Port Scanner Detect LOG\u0026#34; log-prefix=\u0026#34;PORT SCAN\u0026#34; protocol=tcp tcp-flags=fin,syn,rst,psh,ack,urg add action=add-src-to-address-list address-list=Port_Scanner address-list-timeout=1w chain=input comment=\u0026#34;Port Scanner Detect\u0026#34; protocol=tcp psd=21,3s,3,1 add action=drop chain=input comment=\u0026#34;dropping port scanners\u0026#34; src-address-list=\u0026#34;port scanners\u0026#34; add action=jump chain=input comment=\u0026#34;Jump for icmp input flow\u0026#34; disabled=yes jump-target=ICMP protocol=icmp add action=jump chain=forward comment=\u0026#34;Jump for icmp forward flow\u0026#34; disabled=yes jump-target=ICMP protocol=icmp add action=drop chain=input comment=\u0026#34;drop ftp brute forcers\u0026#34; dst-port=21 protocol=tcp src-address-list=ftp_blacklist add action=drop chain=input comment=\u0026#34;drop ssh brute forcers\u0026#34; dst-port=22 protocol=tcp src-address-list=ssh_blacklist add action=add-src-to-address-list address-list=ssh_blacklist address-list-timeout=1w3d chain=input connection-state=new dst-port=22 protocol=tcp src-address-list=ssh_stage3 add action=add-src-to-address-list address-list=ssh_stage3 address-list-timeout=1m chain=input connection-state=new dst-port=22 protocol=tcp src-address-list=ssh_stage2 add action=add-src-to-address-list address-list=ssh_stage2 address-list-timeout=1m chain=input connection-state=new dst-port=22 protocol=tcp src-address-list=ssh_stage1 add action=add-src-to-address-list address-list=ssh_stage1 address-list-timeout=1m chain=input connection-state=new dst-port=22 protocol=tcp add action=drop chain=forward comment=\u0026#34;drop ssh brute downstream\u0026#34; dst-port=22 protocol=tcp src-address-list=ssh_blacklist add action=drop chain=ICMP comment=\u0026#34;Drop to the other ICMPs\u0026#34; disabled=yes protocol=icmp add action=drop chain=forward comment=\u0026#34;Drop to bogon list\u0026#34; dst-address-list=bogons add action=add-src-to-address-list address-list=spammers address-list-timeout=3h chain=forward comment=\u0026#34;Add Spammers to the list for 3 hours\u0026#34; connection-limit=30,32 dst-port=25,587 limit=30/1m,0 protocol=tcp add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;ALL/ALL scan\u0026#34; protocol=tcp tcp-flags=fin,syn,rst,psh,ack,urg add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;NMAP NULL scan\u0026#34; protocol=tcp tcp-flags=!fin,!syn,!rst,!psh,!ack,!urg add action=add-src-to-address-list address-list=Syn_Flooder address-list-timeout=30m chain=input comment=\u0026#34;Add Syn Flood IP to the list\u0026#34; connection-limit=30,32 protocol=tcp tcp-flags=syn add action=add-src-to-address-list address-list=\u0026#34;port scanners\u0026#34; address-list-timeout=2w chain=input comment=\u0026#34;Port scanners to list \u0026#34; protocol=tcp psd=21,3s,3,1 add action=drop chain=forward comment=\u0026#34;DENIEGO ICMP\u0026#34; disabled=yes protocol=icmp add action=accept chain=input comment=\u0026#34;Accept DNS - UDP\u0026#34; port=53 protocol=udp add action=accept chain=input comment=\u0026#34;Accept DNS - TCP\u0026#34; port=53 protocol=tcp add action=accept chain=forward comment=\u0026#34;ACEPTAR FTP \u0026#34; connection-state=established connection-type=ftp protocol=0 add action=accept chain=input comment=\u0026#34;Full access to SUPPORT address list\u0026#34; src-address-list=support add action=accept chain=ICMP comment=\u0026#34;Echo request - Avoiding Ping Flood\u0026#34; icmp-options=8:0 limit=1,5 protocol=icmp add action=accept chain=ICMP comment=\u0026#34;Echo reply\u0026#34; icmp-options=0:0 protocol=icmp add action=accept chain=ICMP comment=\u0026#34;Time Exceeded\u0026#34; icmp-options=11:0 protocol=icmp add action=accept chain=ICMP comment=\u0026#34;Destination unreachable\u0026#34; icmp-options=3:0-1 protocol=icmp add action=accept chain=ICMP comment=PMTUD icmp-options=3:4 protocol=icmp add action=drop chain=ICMP comment=\u0026#34;Drop to the other ICMPs\u0026#34; disabled=yes protocol=icmp add action=log chain=input log-prefix=\u0026#34;PING DENEGADO\u0026#34; protocol=icmp add action=drop chain=virus comment=\u0026#34;VIRUS DE WINDOWS\u0026#34; dst-port=135-139,445 protocol=tcp add action=log chain=virus comment=\u0026#34;LOG VIRUS DE WINDOWS\u0026#34; dst-port=135-139,445 log-prefix=\u0026#34;VIRUS WINDOWS\u0026#34; protocol=tcp add action=jump chain=input jump-target=virus add action=drop chain=input comment=\u0026#34;Bloqueo DNS cache externo\u0026#34; dst-port=53 protocol=udp add action=drop chain=forward comment=\u0026#34;Todo P2P\u0026#34; connection-mark=p2p-conn disabled=yes add action=drop chain=input comment=\u0026#34;DROP INPUT P2P\u0026#34; connection-mark=p2p-conn disabled=yes add action=drop chain=input comment=\u0026#34;DROP OUTPUT P2P\u0026#34; connection-mark=p2p-conn disabled=yes add action=drop chain=input comment=\u0026#34;corta ping packetes de 99 bytes a m\\E1s.\u0026#34; packet-size=128-65535 protocol=icmp add action=log chain=input log-prefix=\u0026#34;PING DENEGADO\u0026#34; protocol=icmp add action=drop chain=input comment=\u0026#34;corta ping\u0026#34; disabled=yes protocol=icmp src-address-list=!guifi.net add action=add-src-to-address-list address-list=\u0026#34;IP\u0026#39;s totales\u0026#34; address-list-timeout=none-dynamic chain=forward disabled=yes src-address=192.168.0.0/16 add action=add-src-to-address-list address-list=acceso-winbox address-list-timeout=none-dynamic chain=input dst-port=8291 protocol=tcp add action=add-src-to-address-list address-list=Port_Scanner address-list-timeout=1w chain=input comment=\u0026#34;Port Scanner Detect PUEDE LLEGAR A CERRAR EL PUERTO FPT SI HAY MUCHA ACTIVIDAD, LO PONE EN LA LISTA COMO SCANER DE PUERTOS \u0026#34; protocol=tcp psd=\\  21,3s,3,1 add action=drop chain=forward comment=\u0026#34;Drop to bogon list\u0026#34; dst-address-list=bogons add action=add-src-to-address-list address-list=spammers address-list-timeout=3h chain=forward comment=\u0026#34;Add Spammers to the list for 3 hours\u0026#34; connection-limit=30,32 dst-port=25,587 limit=30/1m,0 protocol=tcp add action=drop chain=forward comment=\u0026#34;Avoid spammers action\u0026#34; dst-port=25,587 protocol=tcp src-address-list=spammers add action=drop chain=forward comment=\u0026#34;Limitar Numero de conexiones UDP por cliente\u0026#34; connection-state=new disabled=yes dst-port=!53,67,123 limit=30,40:packet protocol=udp add action=drop chain=forward comment=\u0026#34;default configuration\u0026#34; disabled=yes protocol=icmp add action=accept chain=input comment=\u0026#34;default configuration\u0026#34; connection-state=related disabled=yes add action=accept chain=input comment=\u0026#34;default configuration\u0026#34; connection-state=established disabled=yes add action=drop chain=input comment=\u0026#34;default configuration\u0026#34; disabled=yes in-interface=Lan add action=accept chain=input comment=\u0026#34;DENIEGO ICMP\u0026#34; disabled=yes protocol=icmp add action=accept chain=forward comment=\u0026#34;Reglas Firewall Basicas\u0026#34; connection-state=related add action=accept chain=forward connection-state=established add action=drop chain=input comment=\u0026#34;FIltra ICMP Redirect\u0026#34; icmp-options=5:0-255 protocol=icmp add action=log chain=input comment=\u0026#34;Port Scanner Detect LOG\u0026#34; log-prefix=\u0026#34;PORT SCAN\u0026#34; protocol=tcp tcp-flags=fin,!syn,!rst,!psh,!ack,!urg add action=log chain=input comment=\u0026#34;Port Scanner Detect LOG\u0026#34; log-prefix=\u0026#34;PORT SCAN\u0026#34; protocol=tcp tcp-flags=fin,syn,rst,psh,ack,urg,!syn,!rst,!ack,!urg add action=accept chain=output content=\u0026#34;530 Login incorrect\u0026#34; dst-limit=1/1m,9,dst-address/1m protocol=tcp add action=add-dst-to-address-list address-list=ftp_blacklist address-list-timeout=3h chain=output content=\u0026#34;530 Login incorrect\u0026#34; protocol=tcp add action=jump chain=input comment=\u0026#34;Jump for icmp input flow\u0026#34; jump-target=ICMP protocol=icmp add action=jump chain=forward comment=\u0026#34;Jump for icmp forward flow\u0026#34; jump-target=ICMP protocol=icmp add action=drop chain=input comment=\u0026#34;Block all access to the winbox - except to support list # DO NOT ENABLE THIS RULE BEFORE ADD YOUR SUBNET IN THE SUPPORT ADDRESS LIST\u0026#34; disabled=yes dst-port=8291 protocol=tcp src-address-list=!support add action=drop chain=input comment=\u0026#34;Drop anything else! # DO NOT ENABLE THIS RULE BEFORE YOU MAKE SURE ABOUT ALL ACCEPT RULES YOU NEED\u0026#34; disabled=yes add action=drop chain=input comment=\u0026#34;ultimo lugar todo lo que viene de fuera se descarta\u0026#34; disabled=yes in-interface=Lan add action=drop chain=input comment=\u0026#34;Block all access to the winbox - except to support list # DO NOT ENABLE THIS RULE BEFORE ADD YOUR SUBNET IN THE SUPPORT ADDRESS LIST\u0026#34; disabled=yes dst-port=8291 protocol=tcp src-address-list=!support add action=drop chain=forward disabled=yes p2p=all-p2p add action=drop chain=forward comment=\u0026#34;block p2p_www\u0026#34; layer7-protocol=p2p_www add action=drop chain=forward comment=\u0026#34;block p2p_dns\u0026#34; dst-port=53 layer7-protocol=p2p_dns protocol=udp add action=add-src-to-address-list address-list=acceso-winbox address-list-timeout=none-dynamic chain=input dst-port=8292 protocol=tcp /ip firewall mangle add action=mark-connection chain=prerouting comment=\u0026#34;PRIO - 7 MULTIDESCARGAS\u0026#34; connection-bytes=50000000-0 new-connection-mark=\u0026#34;PRIO 7\u0026#34; passthrough=yes protocol=tcp add action=mark-packet chain=prerouting connection-mark=\u0026#34;PRIO 7\u0026#34; new-packet-mark=\u0026#34;PRIO 7\u0026#34; passthrough=yes add action=jump chain=prerouting jump-target=\u0026#34;TERMINO DE PROCESAR\u0026#34; packet-mark=\u0026#34;PRIO 7\u0026#34; add action=mark-connection chain=prerouting comment=\u0026#34;MARCO PRIO 1\u0026#34; new-connection-mark=\u0026#34;PRIO 1\u0026#34; passthrough=yes protocol=icmp add action=mark-connection chain=output dst-port=53 new-connection-mark=\u0026#34;PRIO 1\u0026#34; passthrough=yes protocol=udp add action=mark-connection chain=prerouting dst-port=53 new-connection-mark=\u0026#34;PRIO 1\u0026#34; passthrough=yes protocol=udp add action=mark-packet chain=prerouting connection-mark=\u0026#34;PRIO 1\u0026#34; new-packet-mark=\u0026#34;PRIO 1\u0026#34; passthrough=yes add action=jump chain=prerouting jump-target=\u0026#34;TERMINO DE PROCESAR\u0026#34; packet-mark=\u0026#34;PRIO 1\u0026#34; add action=mark-connection chain=prerouting comment=\u0026#34;MARCO PRIO 2 , STREAMING - JUEGOS,VOIP\u0026#34; dst-port=5060-5061 new-connection-mark=\u0026#34;PRIO 2\u0026#34; passthrough=yes protocol=udp add action=mark-connection chain=prerouting dst-port=1863,5190,777 new-connection-mark=\u0026#34;PRIO 2\u0026#34; passthrough=yes protocol=tcp add action=mark-packet chain=prerouting connection-mark=\u0026#34;PRIO 2\u0026#34; new-packet-mark=\u0026#34;PRIO 2\u0026#34; passthrough=yes add action=jump chain=prerouting jump-target=\u0026#34;TERMINO DE PROCESAR\u0026#34; packet-mark=\u0026#34;PRIO 2\u0026#34; add action=mark-connection chain=prerouting comment=\u0026#34;marco prio 3 navegacion\u0026#34; dst-port=80,443,8000-9000 new-connection-mark=\u0026#34;PRIO 3\u0026#34; passthrough=yes protocol=tcp add action=mark-packet chain=prerouting connection-mark=\u0026#34;PRIO 3\u0026#34; new-packet-mark=\u0026#34;PRIO 3\u0026#34; passthrough=yes add action=jump chain=prerouting jump-target=\u0026#34;TERMINO DE PROCESAR\u0026#34; packet-mark=\u0026#34;PRIO 3\u0026#34; add action=mark-connection chain=prerouting comment=\u0026#34;PRIO 4 - PUERTOS LABORALES\u0026#34; dst-port=25,110,143,3389,1723,21-23 new-connection-mark=\u0026#34;PRIO 4\u0026#34; passthrough=yes protocol=tcp add action=mark-packet chain=prerouting connection-mark=\u0026#34;PRIO 4\u0026#34; new-packet-mark=\u0026#34;PRIO 4\u0026#34; passthrough=yes add action=jump chain=prerouting jump-target=\u0026#34;TERMINO DE PROCESAR\u0026#34; packet-mark=\u0026#34;PRIO 4\u0026#34; add action=mark-connection chain=prerouting comment=\u0026#34;MARCO PRIO 5\u0026#34; new-connection-mark=\u0026#34;PRIO 5\u0026#34; passthrough=yes add action=mark-packet chain=prerouting connection-mark=\u0026#34;PRIO 5\u0026#34; new-packet-mark=\u0026#34;PRIO 5\u0026#34; passthrough=yes add action=accept chain=\u0026#34;TERMINO DE PROCESAR\u0026#34; /ip firewall nat add action=masquerade chain=srcnat comment=\u0026#34;default configuration\u0026#34; out-interface=Lan to-addresses=0.0.0.0 /ip firewall service-port set ftp disabled=yes set tftp disabled=yes set irc disabled=yes set h323 disabled=yes set sip disabled=yes set pptp disabled=yes /ip hotspot ip-binding ... ... /ip hotspot service-port set ftp disabled=yes /ip hotspot user add name=admin password=password profile=admin server=hotspot1 add name=usuario password=usuario server=hotspot1 add disabled=yes name=usuario@correo.com password=password123 server=hotspot1 /ip hotspot walled-garden add disabled=yes dst-host=www.google.es server=hotspot1 src-address=0.0.0.0 add comment=\u0026#34;place hotspot rules here\u0026#34; disabled=yes add dst-host=guifi.net add dst-host=*.guifi.net*/* add dst-host=gg.google.com add dst-host=maps.google.com add dst-host=khm0.google.com add dst-host=khm1.google.com add dst-host=khm2.google.com add dst-host=khm3.google.com add dst-host=mt0.google.com add dst-host=mt1.google.com add dst-host=mt2.google.com add dst-host=mt3.google.com add dst-host=maps.gstatic.com add dst-host=gg.google.com add dst-host=id.google.com add dst-host=www.google-analytics.com add dst-host=www.heywhatsthat.com add dst-host=ocsp.thawte.com add dst-host=https://securityinabox.org/es*/* add dst-host=http://www.eltiempo.es/* add dst-host=http://elrollodecepeda.wordpress.com/* add dst-host=http://cepedadelamora.blogspot.com/* add dst-host=https://llistes.guifi.net/sympa/info/guifi-gredos add dst-host=https://llistes.guifi.net/* add dst-host=http*://securityinabox.org/es*/* add dst-host=https://*llistes.guifi.net*/* add dst-host=https://llistes.guifi.net/sympa/subscribe/guifi-gredos add dst-host=https://llistes.guifi.net/sympa*/* add dst-host=https://llistes.guifi.net/sympa/* add dst-host=http://bin-short.whatsapp.net/ add dst-host=http://cepedadelamora.blogspot.com.es/ add dst-host=*.qui.guifi.net*/* /ip hotspot walled-garden ip add action=accept comment=10.0.0.0/8 disabled=no dst-address=10.0.0.0/8 !dst-port !protocol !src-address add action=accept comment=llistes.guifi.net disabled=no dst-address=109.69.12.15 !dst-port !protocol !src-address add action=accept comment=securityinabox.org disabled=no dst-address=88.198.62.144 !dst-port !protocol !src-address /ip ipsec policy set 0 dst-address=0.0.0.0/0 src-address=0.0.0.0/0 /ip proxy set cache-administrator=mail@gmail.com cache-path=web-proxy1 parent-proxy=0.0.0.0 /ip route add distance=1 gateway=10.228.150.1 /ip service set telnet disabled=yes set ftp address=0.0.0.0/0 disabled=yes set www address=192.168.1.0/24 set ssh address=0.0.0.0/0 disabled=yes set www-ssl address=0.0.0.0/0 certificate=cert1 disabled=no set api disabled=yes set winbox address=0.0.0.0/0 port=8291 set api-ssl disabled=yes /ip traffic-flow set active-flow-timeout=10m cache-entries=64k enabled=yes /ip traffic-flow target add dst-address=10.228.150.2 port=5556 /snmp set contact=guifi@guifi.net enabled=yes location=hostname /system clock set time-zone-autodetect=no time-zone-name=Europe/Madrid /system clock manual set dst-end=\u0026#34;feb/01/1970 00:00:00\u0026#34; dst-start=\u0026#34;feb/01/1970 00:00:00\u0026#34; /system identity set name=hostname /system logging add action=remote topics=critical add action=remote topics=error add action=remote topics=info add action=remote topics=warning add topics=e-mail add action=remote topics=e-mail add action=disk topics=critical add action=remote topics=firewall add action=disk topics=system add action=echo topics=warning /system note set note=\u0026#34;MMMMMMMMMMMMMMMMMMMMMXo,;:::;,;dXMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\\ \\nMMMMMMMMMMMMMMMMMMMWO;;OWMMWXo. :KMMMMMWKxoldkXWMMMMMMMMMMMMMMMMMMMMMM\\ \\nMMMMMMMMMMMMMMMMMMKc\u0026#39;lXMMMMMMX: ;KMMMXo;dk\u0026#39; .cx0KNWMMMMMMMMMMMMMMMMM\\ \\nMMMMMMMMMMMMMMMMMO,,OWMMMMMMMWo ,oxxcc0WWx..\u0026#39;. .,.,dXMMMMMMMMMMMMMMM\\ \\nMMMMMMMMMMMMMMMMK;:XMMMMMMMMMMXc..;cokKWMMXkl:clcc, :XMMMMMMMMMMMMMM\\ \\nMMMMMMMMMMMMMMMK:lXMMMMMMMMMMMM0\u0026#39; .:cod0NWd..;,..\u0026#39;;,. oNMMMMMMMMMMMMM\\ \\nMMMMMMMMMMMMMXx;oNMMMMMMMMMMMMNOl:;:::cooddl:;,,\u0026#39; .cl;.;oOKNWMMMMMMMM\\ \\nMMMMMMMMMW0olcl0WMMMMMMMMMMMMMWK0NX0OdoooolccloOKkl:dklcc,..,oddKMMMMM\\ \\nMMMMMMMMKc\u0026#39;:kXWMMMMMMMMMMMMMMMMMMMMMWx;\u0026#39;..:cclllodxolo,.\u0026#39;:. .,..oKWMM\\ \\nMMMMMMNd,:0WMMMMMMMMMMMMMMMMMMMMMMNXo. .cooll;..,codc,. .,\u0026#39;,;,\u0026#39;:ON\\ \\nMMMWXd::kWMMMMMMMMMMMMMMMMMMMMMMMM0l\u0026#39; \u0026#39;;;:oollc,,dOdl;\u0026#39;;clodoolk\\ \\nN0kdooONMMMMMMMMMMMMMMMMMMMMMMMMMWd,\u0026#39;.. \u0026#39;loldXNkolllokxookKKXWNK\\ \\nXK0XWMMMMMMMMMMMMMMMMMMMMMMMMMMWKOdccoxc. \u0026#39;dOkOXN0x0XK0NMMMMMMMMMM\\ \\nMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMKx0MXxdkxl:,::dKWMMWMMMWWMMMMMMMMMMMMM\\ \\n\u0026#34; /system ntp client set enabled=yes primary-ntp=158.227.98.15 secondary-ntp=193.136.164.1 /system ntp server set enabled=yes multicast=yes /system routerboard settings set silent-boot=no /system scheduler add comment=23:42:26 interval=23h54m name=LOG_MAIL on-event=\u0026#34;:local scheduleName \\\u0026#34;LOG_MAIL\\\u0026#34;\\r\\ \\n:local emailAddress \\\u0026#34;mail@gmail.com\\\u0026#34;\\r\\ \\n:local startBuf [:toarray [/log find message~\\\u0026#34;logged in\\\u0026#34; || message~\\\u0026#34;login failure\\\u0026#34;]]\\r\\ \\n:local removeThese (\\\u0026#34;\\\u0026#34;)\\r\\ \\n \\r\\ \\n:local lastTime [/system scheduler get [find name=\\\u0026#34;\\$scheduleName\\\u0026#34;] comment]\\r\\ \\n \\r\\ \\n:local currentBuf \\\u0026#34;\\\u0026#34;; :set currentBuf [:toarray \\$currentBuf]\\r\\ \\n \\r\\ \\n:foreach i in=\\$startBuf do={\\r\\ \\n :local toggle 1\\r\\ \\n :foreach j in=[:toarray \\$removeThese] do={\\r\\ \\n :if ([:typeof [:find [/log get \\$i message] \\\u0026#34;\\$j\\\u0026#34;]] = \\\u0026#34;num\\\u0026#34;) do={\\r\\ \\n :set toggle 0\\r\\ \\n }\\r\\ \\n }\\r\\ \\n :if (\\$toggle = 1) do={\\r\\ \\n :set currentBuf (\\$currentBuf , \\$i)\\r\\ \\n }\\r\\ \\n}\\r\\ \\n \\r\\ \\n:local currentLineCount [ :len \\$currentBuf ]\\r\\ \\n \\r\\ \\nif (\\$currentLineCount \u0026gt; 0) do={\\r\\ \\n :local currentTime \\\u0026#34;\\$[ /log get [ :pick \\$currentBuf (\\$currentLineCount -1) ] time ]\\\u0026#34;\\r\\ \\n \\r\\ \\n :if ([:len \\$currentTime] = 15 ) do={\\r\\ \\n :set currentTime [ :pick \\$currentTime 7 15 ]\\r\\ \\n }\\r\\ \\n \\r\\ \\n :local output \\\u0026#34;\\$currentTime \\$[/log get [ :pick \\$currentBuf (\\$currentLineCount-1) ] message ]\\\u0026#34;\\r\\ \\n \\r\\ \\n :if (([:len \\$lastTime] \u0026lt; 1) || (([:len \\$lastTime] \u0026gt; 0) \u0026amp;\u0026amp; (\\$lastTime != \\$currentTime))) do={\\r\\ \\n /system scheduler set [find name=\\\u0026#34;\\$scheduleName\\\u0026#34;] comment=\\$currentTime\\r\\ \\n /tool e-mail send to=\\\u0026#34;mail@gmail.com\\\u0026#34; port=25 server=74.125.133.108 user=mail@gmail.com password=password from=hostname start-tls=yes subject=\\\u0026#34;hostname_LOG \\$currentTime\\\u0026#34; body=\\\u0026#34;\\$output\\\u0026#34;\\r\\ \\n }\\r\\ \\n}\u0026#34; policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive start-time=startup add interval=23h53m name=SEND_BACKUP on-event=\u0026#34;/system script run SEND_BACKUP\u0026#34; policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive start-time=startup add comment=\u0026#34;REINICIO CADA DIA\u0026#34; interval=1d name=schedule1 on-event=\u0026#34;/system script run reiniciar\u0026#34; policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive start-date=jun/03/2016 start-time=06:00:00 /system script add dont-require-permissions=no name=console_detail owner=admin policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive source=\u0026#34;:local content\\r\\ \\n:local logcontenttemp \\\u0026#34;\\\u0026#34;\\r\\ \\n:local logcontent \\\u0026#34;\\\u0026#34;\\r\\ \\n:local counter\\r\\ \\n:local v 0\\r\\ \\n \\r\\ \\n:set logcontenttemp \\\u0026#34;You are logged into: \\$[/system identity get name]\\\u0026#34;\\r\\ \\n:set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34;\\\\n\\\u0026#34;)\\r\\ \\n \\r\\ \\n:set logcontenttemp \\\u0026#34;############### system health ###############\\\u0026#34;\\r\\ \\n:set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34;\\\\n\\\u0026#34;)\\r\\ \\n \\r\\ \\n:set logcontenttemp \\\u0026#34;Uptime: \\$[/system resource get uptime] d:h:m:s\\\u0026#34;\\r\\ \\n:set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34; | \\\u0026#34;)\\r\\ \\n \\r\\ \\n:set logcontenttemp \\\u0026#34;CPU: \\$[/system resource get cpu-load]%\\\u0026#34;\\r\\ \\n:set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34;\\\\n\\\u0026#34;)\\r\\ \\n \\r\\ \\n:set logcontenttemp \\\u0026#34;RAM: \\$(([/system resource get total-memory]-[/system resource get free-memory])/1024)/\\$([/system resource get total-memory]/1024)M\\\u0026#34;\\r\\ \\n:set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34; | \\\u0026#34;)\\r\\ \\n \\r\\ \\n##\\r\\ \\n#voltage and temp readout not available on x86, check for this before trying\\r\\ \\n#to record otherwise script will halt unexpectedly\\r\\ \\n##\\r\\ \\n \\r\\ \\n:if ([/system resource get architecture-name]=\\\u0026#34;x86\\\u0026#34;) do={\\r\\ \\n :set logcontenttemp \\\u0026#34;Voltage: NIL\\\u0026#34;\\r\\ \\n :set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34; | \\\u0026#34;)\\r\\ \\n :set logcontenttemp \\\u0026#34;Temp: NIL\\\u0026#34;\\r\\ \\n :set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34;\\\\n\\\u0026#34;)\\r\\ \\n} else={\\r\\ \\n :set logcontenttemp \\\u0026#34;Voltage: \\$[:pick [/system health get voltage] 0 2] v\\\u0026#34;\\r\\ \\n :set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34; | \\\u0026#34;)\\r\\ \\n :set logcontenttemp \\\u0026#34;Temp: \\$[ /system health get temperature]c\\\u0026#34;\\r\\ \\n :set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34;\\\\n\\\u0026#34;)\\r\\ \\n}\\r\\ \\n \\r\\ \\n:set logcontenttemp \\\u0026#34;############# user auth details #############\\\u0026#34;\\r\\ \\n:set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34;\\\\n\\\u0026#34;)\\r\\ \\n \\r\\ \\n:foreach counter in=[/ip hotspot active find ] do={:set v (\\$v + 1)}\\r\\ \\n:set logcontenttemp \\\u0026#34;Hotspot online: \\$v |\\\u0026#34;\\r\\ \\n:set v 0\\r\\ \\n:foreach counter in=[/ppp active find ] do={:set v (\\$v + 1)}\\r\\ \\n:set logcontenttemp (\\\u0026#34;\\$logcontenttemp\\\u0026#34; . \\\u0026#34; PPP online: \\$v\\\u0026#34;)\\r\\ \\n:set logcontent (\\\u0026#34;\\$logcontent\\\u0026#34; .\\\u0026#34;\\$logcontenttemp\\\u0026#34; .\\\u0026#34;\\\\n\\\u0026#34;)\\r\\ \\n \\r\\ \\n/system note set note=\\\u0026#34;\\$logcontent\\\u0026#34;\u0026#34; add dont-require-permissions=no name=reiniciar owner=admin policy=ftp,reboot,read,write,policy,test,password source=\u0026#34;/system reboot\u0026#34; add dont-require-permissions=no name=SEND_BACKUP owner=admin policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive source=\u0026#34;/system backup save name=hostname_email_backup dont-encrypt=no\\r\\ \\n/log print file=hostname_logmail.txt\\r\\ \\n\\r\\ \\n/tool e-mail send file=hostname_email_backup.backup to=mail@gmail.com port=25 server=74.125.133.108 user=mail@gmail.com password=password from=hostname start-tls=yes subject=hostname_backup_diario body=hostname_backup_diario\\r\\ \\n/tool e-mail send file=hostname_logmail.txt to=mail@gmail.com port=25 server=74.125.133.108 user=mail@gmail.com password=password from=hostname start-tls=yes subject=hostname_log_diario body=hostname_log_diario\u0026#34; add dont-require-permissions=no name=address_list_winbox-acces owner=admin policy=ftp,reboot,read,write,policy,test,password,sniff,sensitive source=\u0026#34;ip firewall address-list print\u0026#34; /tool e-mail set address=74.125.133.108 from=hostname password=password start-tls=yes user=mail@gmail.com /tool graphing interface add add interface=bridge1 add add interface=ether1 add interface=ether3 add interface=ether4 add interface=ether5 add /tool graphing queue add simple-queue=2MB_down_384MB_up add simple-queue=queue1 /tool graphing resource add /tool mac-server set allowed-interface-list=mactel /tool mac-server mac-winbox set allowed-interface-list=mac-winbox /tool romon port add *\u0026gt;   Conclusión Como conclusión os digo, que en este momento se intentan poner todas las facilidades posibles para que a pie de calle se pueda conectar al acceso abierto con cualquier dispositivo que cuente al menos con 802.11b.\nAl principio estaba el portal cautivo del hotspot con acceso limitado en tiempo y caudal (creo que eran 320k simétricos para cada dispositivo por un tiempo de 2 horas al día por dispositivo), en esta gestión por MAC, el \u0026ldquo;cliente\u0026rdquo; se tenia que abrir una página cualquiera en el navegador del dispositivo y esta le redireccionaba a la página del hotspot, después validarse en el hotspot con un link de pincha aquí para tener acceso, en fin, un lío para cualquiera que quisiera conectarse a la wifi donde me cansé de dar instrucciones.\nHubo un día que me toco las narices y se deshabilitó el hotspot. Ahora para tener conexión a internet basta con conectar a la wifi. Hay un caudal límite para toadas las conexiones de acceso abierto, y el \u0026ldquo;cliente\u0026rdquo; cuando se quiere conectar solo tiene que conectar con el SSID del AP, se conecta a una wifi que no tiene contraseña, se asigna una IP y ya le funciona el WhatsApp y cualquier servicio de su dispositivo, antes para que funcionara el WhatsApp primero había que conectase al portal cautivo con el navegador, y no valía la barra de búsqueda de Google que usan muchos usuarios.\nLa gestión del tráfico en el acceso abierto se hace por QoS se asignan prioridades dependiendo del servicio.\nSi tuviéramos 100 o 200 Mb de salida a internet no tendríamos estos problemas y a pié de calle el grifo estaría abierto a demanda, pero la salida a internet es limitada y requiere de gestión por QoS para evitar la congestión.\nLo que tenemos actualmente, en 2021, es un una salida global a internet por telefonía móvil que falla cuando quiere y que hay que repartir entre muchas conexiones. Hay un caudal limitado para el total de conexiones a pie de calle y el resto es para las conexiones residenciales.\nEl invento funciona más o menos 335 días al año, hay 30 días cuando llegan las temporadas de máxima concurrencia de conexiones que da igual lo que tengas configurado porque la salida a internet es la misma todo el año y no da para más.\nPor ejemplo, en verano que son las temporadas de pico máximo, con 30 nodos residenciales a 4 dispositivos de media por nodo son 120 dispositivos residenciales + de 20 a 40 dispositivos del hotspot son 150 dispositivos que tienen que salir a internet por una conexión que está dimensionada para tener de 1 a 4 dispositivos.\nQue quede claro que yo no soy partidario hacer gestión del tráfico en ningún sitio y mucho menos en una red comunitaria, pero la salida a internet es la que es y hay momentos en los que hay muchas bocas que alimentar. Son los usuarios los que se tienen que responsabilizar de su uso.\nUna posible solución a este problema de concurrencia seria aplicar QoS dinámicas en las que se hiciera la gestión del tráfico por prioridad, tiempo y caudal, basándose en el número de conexiones y demanda de cada momento. Esto no sé hacerlo, se admiten sugerencias.\n\n","description":"hotspot","id":15,"section":"posts","tags":["guifi.net","hotspot","mikrotik"],"title":"Hotspot","uri":"https://hotspotcepeda.github.io/es/posts/hotspot/"},{"content":"En este artículo se comenta como intenté buscar el apoyo en asociaciones locales para que promovieran la iniciativa de una red de telecomunicaciones comunitaria, de alguna manera, para conseguir tener una wifi púbica, un acceso público a internet en un área rural desfavorecida. Por aquel entonces las conexiones a internet en Cepeda se hacían mediante el ISP Iberbanda (que daba conexiones de 1 2 y 3 Mb simétricos), y el 3G era un lujo.\nContactos Habían pasado unos cuantos de años desde que vi la página de guifi.net por primera vez y navegando por la internet lo volví a ver, ahora había un montón de nodos y la tela de araña se estaba extendiendo incluso fuera de Cataluña. A mí me gustaba la idea de la red libre abierta y neutral pero no tenía ni idea de como empezar.\nEn Cataluña guifi.net llevaba 10 años funcionando y el proyecto iba creciendo.\nYo acababa de ser despedido de manera improcedente de una empresa de telecomunicaciones en la que me dedicaba a instalar equipos de wifi para dar cobertura a nivel población e interconectar dependencias municipales, tenía mucha rabia acumulada y estaba viendo una sonrisa en los pueblos que tenían wifi, la verdad es que era un trabajo que me gustaba mucho y me fastidió cuando me dijeron que me dejaban en la calle.\nHubo una persona que me sugirió la idea de la wifi comunitaria y fue entonces cuando se me metió en la cabeza la idea de aportar mi experiencia al pueblo que me había visto crecer y del que estoy tan orgulloso.\nNo tenía ni idea de como empezar, así que pensé que contactar con asociaciones locales me podía iluminar y que iban a apoyar mi idea, que no era otra que compartir una salida a internet y ponerla a disposición del que la necesitara.\nAsí qué, Intenté buscar aliados, para por lo menos, presentar una propuesta.\n Lo primero contacté con la asociación El Royo de Cepeda la Mora, la asociación más potente del pueblo https://www.facebook.com/elrollodecepeda/, se enviaron 2 correos a elrollodecepeda@gmail.com comentando la idea de la wifi en el pueblo y hablando del proyecto guifi.net, sin respuesta. Contacté con ASENORG, Asociación Empresarios Gredos al mail de Isabel Sánchez Tejado isabelstejado@gmail.com, que era el que había de contacto, sin respuesta (Ahora esta persona se dedica a \u0026ldquo;el cultivo de Piornos (no te pierdas nuestro Festival del Piorno)\u0026rdquo;. Me parto. Según https://repueblo.es/cracksrurales/la-inspiradora-historia-de-una-repobladora-en-gredos). Y con voluntariadogredoslibre@gmail.com, sin respuesta, claro.  Eran las asociaciones locales que había en aquella época.\nTener el respaldo de una asociación consolidada dará fuerza al proyecto. Si no hay nada, es muy interesante contemplar la posibilidad de crear una fundación, asociación, cooperativa, grupo o colectivo de usuarios para fomentar la implicación del grupo y para repartir la carga de trabajo. Tomar de decisiones es más fácil cuando no estás solo. Pero también ten en cuenta que si viajas solo, podrás volar a donde quieras y estar el tiempo que te dé la gana.\nguifi.net También contacté con guifi.net fundacio@guifi.net, sin respuesta. Descubrí que las comunicaciones en guifi.net se hacían mediante las listas de correo https://llistes.guifi.net/sympa y tiene sentido, es interesante tener un repositorio de información para poder hacer búsquedas y navegación de hilos. Aunque las listas de correo son cada vez menos populares se siguen usando.\nY con la agrupación guifi.net Extremadura, mediante las listas de correo ya hubo algo de diálogo.\nUn día me presenté en el MediaLab Prado, un sitio maravilloso lleno de gente extraordinaria que el Ayto. de Madrid quiere desalojar para convertirlo en un museo, está claro que este país no tiene mucho interés en la cultura y que todo está orientado a vivir del turismo, un país que es el chiringuito de Europa, con sol, playa y el producto estrella: El folclore.\nFinalmente con el apoyo de Gabi y Alex, las personas que conocí en el MediaLab Prado, se presentó una propuesta al ayuntamiento de Cepeda para poner un hotspot y un par de AP en 2.4 para conexión wifi pública a pie de calle, una antena en la plaza del Ayto. y otra en el bar municipal. La salida a internet la donaba el ayuntamiento que tenía contratada una conexión de 3 Mb simétricos y que la mayoría del tiempo estaba sin uso.\nPara desplegar una red comunitaria local wireless vas a necesitar tener algúnos conocimientos.\nHay un libro publicado bajo licencia Creative Commons que a mí me gustó mucho, \u0026ldquo;Redes inalámbricas en los países en desarrollo.\u0026rdquo;\nEs gratis y está traducido al español y a muchos más idiomas, se puede descargar en http://wndw.net/book.html\nTampoco es necesario que te conviertas en un experto en telecomunicaciones, para desplegar y mantener la red puedes contratar a un profesional de tu zona, qué para eso están.\nIgualmente hay que valorar el tipo de despliegue que se quiere hacer y las necesidades que se quieren cubrir, por ejemplo, cada vez es más barato desplegar con fibra óptica.","description":"arrancando","id":16,"section":"posts","tags":["guifi.net","asociaciones"],"title":"Arrancando","uri":"https://hotspotcepeda.github.io/es/posts/arrancando/"}]